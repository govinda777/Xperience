import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { useState, useEffect } from "react";
export const BitcoinPaymentComponent = ({ plan, finalPrice, onProcess, isProcessing, disabled = false }) => {
    const [btcPrice, setBtcPrice] = useState(0);
    const [btcAmount, setBtcAmount] = useState(0);
    const [showInstructions, setShowInstructions] = useState(false);
    const [loadingPrice, setLoadingPrice] = useState(true);
    // Carregar cotação do Bitcoin
    useEffect(() => {
        const fetchBitcoinPrice = async () => {
            try {
                setLoadingPrice(true);
                const response = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=brl");
                const data = await response.json();
                const price = data.bitcoin.brl;
                setBtcPrice(price);
                setBtcAmount(finalPrice / price);
            }
            catch (error) {
                console.error("Erro ao buscar cotação Bitcoin:", error);
                // Fallback com cotação aproximada
                setBtcPrice(300000); // ~R$ 300k por BTC
                setBtcAmount(finalPrice / 300000);
            }
            finally {
                setLoadingPrice(false);
            }
        };
        fetchBitcoinPrice();
        // Atualizar cotação a cada 30 segundos
        const interval = setInterval(fetchBitcoinPrice, 30000);
        return () => clearInterval(interval);
    }, [finalPrice]);
    return (_jsxs("div", { className: "bitcoin-payment-component", children: [_jsxs("div", { className: "mb-6", children: [_jsxs("div", { className: "flex items-center space-x-3 mb-4", children: [_jsx("div", { className: "text-4xl", children: "\u20BF" }), _jsxs("div", { children: [_jsx("h3", { className: "text-xl font-bold text-gray-800", children: "Pagamento via Bitcoin" }), _jsx("p", { className: "text-sm text-gray-600", children: "Descentralizado \u2022 Privado \u2022 5% de desconto" })] })] }), _jsxs("div", { className: "bg-orange-50 border border-orange-200 rounded-lg p-4 mb-4", children: [_jsxs("div", { className: "flex items-center space-x-2 mb-2", children: [_jsx("span", { className: "text-orange-500", children: "\uD83C\uDF89" }), _jsx("span", { className: "text-sm font-medium text-orange-800", children: "Desconto especial de 5%" })] }), _jsx("p", { className: "text-sm text-orange-700", children: "Pagando com Bitcoin voc\u00EA economiza 5% e contribui para a descentraliza\u00E7\u00E3o!" })] }), _jsxs("div", { className: "space-y-3", children: [_jsxs("div", { className: "flex justify-between items-center py-2 border-b border-gray-100", children: [_jsx("span", { className: "text-gray-600", children: "Plano:" }), _jsx("span", { className: "font-medium", children: plan.name })] }), _jsxs("div", { className: "flex justify-between items-center py-2 border-b border-gray-100", children: [_jsx("span", { className: "text-gray-600", children: "Valor original:" }), _jsxs("span", { className: "text-gray-500 line-through", children: ["R$ ", plan.price.toFixed(2)] })] }), _jsxs("div", { className: "flex justify-between items-center py-2 border-b border-gray-100", children: [_jsx("span", { className: "text-gray-600", children: "Valor com desconto:" }), _jsxs("span", { className: "text-xl font-bold text-green-600", children: ["R$ ", finalPrice.toFixed(2)] })] }), _jsxs("div", { className: "flex justify-between items-center py-2", children: [_jsx("span", { className: "text-gray-600", children: "Equivalente em Bitcoin:" }), _jsx("div", { className: "text-right", children: loadingPrice ? (_jsxs("div", { className: "flex items-center space-x-2", children: [_jsx("div", { className: "w-4 h-4 border-2 border-orange-500 border-t-transparent rounded-full animate-spin" }), _jsx("span", { className: "text-sm text-gray-500", children: "Calculando..." })] })) : (_jsxs(_Fragment, { children: [_jsxs("div", { className: "font-bold text-orange-600", children: ["\u20BF ", btcAmount.toFixed(8)] }), _jsxs("div", { className: "text-xs text-gray-500", children: ["1 BTC = R$ ", btcPrice.toLocaleString("pt-BR")] })] })) })] })] })] }), _jsxs("div", { className: "mb-6 p-4 bg-gray-50 rounded-lg", children: [_jsx("h4", { className: "text-sm font-medium text-gray-700 mb-2", children: "Por que escolher Bitcoin?" }), _jsxs("div", { className: "space-y-2 text-sm text-gray-600", children: [_jsxs("div", { className: "flex items-center space-x-2", children: [_jsx("span", { className: "text-orange-500", children: "\uD83D\uDD12" }), _jsx("span", { children: "Transa\u00E7\u00E3o descentralizada e segura" })] }), _jsxs("div", { className: "flex items-center space-x-2", children: [_jsx("span", { className: "text-orange-500", children: "\uD83C\uDF0D" }), _jsx("span", { children: "Aceito globalmente, sem fronteiras" })] }), _jsxs("div", { className: "flex items-center space-x-2", children: [_jsx("span", { className: "text-orange-500", children: "\uD83D\uDCB0" }), _jsx("span", { children: "5% de desconto exclusivo" })] }), _jsxs("div", { className: "flex items-center space-x-2", children: [_jsx("span", { className: "text-orange-500", children: "\uD83D\uDCC8" }), _jsx("span", { children: "Reserva de valor digital" })] })] })] }), _jsxs("div", { className: "mb-6", children: [_jsxs("button", { onClick: () => setShowInstructions(!showInstructions), className: "flex items-center justify-between w-full p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors", children: [_jsx("span", { className: "text-sm font-medium text-gray-700", children: "Como funciona o pagamento Bitcoin?" }), _jsx("span", { className: `transform transition-transform ${showInstructions ? "rotate-180" : ""}`, children: "\u25BC" })] }), showInstructions && (_jsx("div", { className: "mt-3 p-4 bg-orange-50 border border-orange-200 rounded-lg", children: _jsxs("ol", { className: "text-sm text-orange-800 space-y-2", children: [_jsxs("li", { className: "flex items-start space-x-2", children: [_jsx("span", { className: "flex-shrink-0 w-5 h-5 bg-orange-500 text-white rounded-full flex items-center justify-center text-xs font-bold", children: "1" }), _jsx("span", { children: "Clique em \"Gerar Endere\u00E7o Bitcoin\" abaixo" })] }), _jsxs("li", { className: "flex items-start space-x-2", children: [_jsx("span", { className: "flex-shrink-0 w-5 h-5 bg-orange-500 text-white rounded-full flex items-center justify-center text-xs font-bold", children: "2" }), _jsx("span", { children: "Copie o endere\u00E7o ou escaneie o QR Code" })] }), _jsxs("li", { className: "flex items-start space-x-2", children: [_jsx("span", { className: "flex-shrink-0 w-5 h-5 bg-orange-500 text-white rounded-full flex items-center justify-center text-xs font-bold", children: "3" }), _jsx("span", { children: "Envie exatamente o valor em BTC da sua carteira" })] }), _jsxs("li", { className: "flex items-start space-x-2", children: [_jsx("span", { className: "flex-shrink-0 w-5 h-5 bg-orange-500 text-white rounded-full flex items-center justify-center text-xs font-bold", children: "4" }), _jsx("span", { children: "Aguarde 1 confirma\u00E7\u00E3o na blockchain (~10-30 min)" })] }), _jsxs("li", { className: "flex items-start space-x-2", children: [_jsx("span", { className: "flex-shrink-0 w-5 h-5 bg-orange-500 text-white rounded-full flex items-center justify-center text-xs font-bold", children: "5" }), _jsx("span", { children: "Seu acesso ser\u00E1 liberado automaticamente" })] })] }) }))] }), _jsx("button", { onClick: onProcess, disabled: disabled || isProcessing || loadingPrice, className: `
          w-full py-4 px-6 rounded-lg font-semibold text-white transition-all duration-200
          ${disabled || isProcessing || loadingPrice
                    ? "bg-gray-400 cursor-not-allowed"
                    : "bg-orange-600 hover:bg-orange-700 active:bg-orange-800 shadow-lg hover:shadow-xl"}
        `, children: isProcessing ? (_jsxs("div", { className: "flex items-center justify-center space-x-2", children: [_jsx("div", { className: "w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin" }), _jsx("span", { children: "Gerando Endere\u00E7o Bitcoin..." })] })) : loadingPrice ? (_jsxs("div", { className: "flex items-center justify-center space-x-2", children: [_jsx("div", { className: "w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin" }), _jsx("span", { children: "Carregando Cota\u00E7\u00E3o..." })] })) : (_jsxs("div", { className: "flex items-center justify-center space-x-2", children: [_jsx("span", { children: "\u20BF" }), _jsx("span", { children: "Gerar Endere\u00E7o Bitcoin" })] })) }), _jsxs("div", { className: "mt-4 space-y-2", children: [_jsxs("div", { className: "flex items-center justify-center space-x-4 text-xs text-gray-500", children: [_jsxs("div", { className: "flex items-center space-x-1", children: [_jsx("span", { children: "\uD83D\uDD12" }), _jsx("span", { children: "Descentralizado" })] }), _jsxs("div", { className: "flex items-center space-x-1", children: [_jsx("span", { children: "\uD83C\uDF0D" }), _jsx("span", { children: "Global" })] }), _jsxs("div", { className: "flex items-center space-x-1", children: [_jsx("span", { children: "\uD83D\uDCB0" }), _jsx("span", { children: "5% OFF" })] })] }), _jsx("p", { className: "text-xs text-gray-500 text-center", children: "Confirma\u00E7\u00E3o t\u00EDpica: 10-30 minutos \u2022 Taxa de rede: ~$1-5 USD" })] }), _jsxs("div", { className: "mt-6 p-4 bg-gray-50 rounded-lg", children: [_jsx("h4", { className: "text-sm font-medium text-gray-700 mb-2", children: "Carteiras Bitcoin compat\u00EDveis:" }), _jsxs("div", { className: "grid grid-cols-4 gap-2 text-xs text-gray-600", children: [_jsx("div", { className: "text-center", children: "Electrum" }), _jsx("div", { className: "text-center", children: "Exodus" }), _jsx("div", { className: "text-center", children: "Trust Wallet" }), _jsx("div", { className: "text-center", children: "MetaMask" }), _jsx("div", { className: "text-center", children: "Binance" }), _jsx("div", { className: "text-center", children: "Coinbase" }), _jsx("div", { className: "text-center", children: "Ledger" }), _jsx("div", { className: "text-center", children: "+ outras" })] })] }), _jsx("div", { className: "mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg", children: _jsxs("div", { className: "flex items-start space-x-2", children: [_jsx("span", { className: "text-yellow-500 mt-0.5", children: "\u26A0\uFE0F" }), _jsxs("div", { className: "text-xs text-yellow-800", children: [_jsx("p", { className: "font-medium mb-1", children: "Importante:" }), _jsx("p", { children: "Envie exatamente o valor em BTC mostrado. Valores diferentes podem n\u00E3o ser processados automaticamente." })] })] }) })] }));
};
