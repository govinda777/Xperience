import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useNavigate } from "react-router-dom";
import { useCart } from "../contexts/CartContext";
import { formatCurrency } from "../types/cart";
import { ShoppingBag, Plus, Minus, Trash2, ArrowLeft, ShoppingCart, } from "lucide-react";
const Cart = () => {
    const navigate = useNavigate();
    const { cart, removeItem, updateQuantity, getCartSummary, hasItems, isLoading, clearCart, } = useCart();
    const summary = getCartSummary();
    const handleQuantityChange = (itemId, newQuantity) => {
        if (newQuantity < 1) {
            removeItem(itemId);
        }
        else {
            updateQuantity(itemId, newQuantity);
        }
    };
    const handleCheckout = () => {
        navigate("/checkout");
    };
    const handleContinueShopping = () => {
        navigate("/plans");
    };
    if (!hasItems()) {
        return (_jsx("div", { className: "min-h-screen bg-gray-50 py-12", children: _jsx("div", { className: "max-w-4xl mx-auto px-4", children: _jsxs("div", { className: "text-center", children: [_jsx(ShoppingBag, { className: "w-24 h-24 mx-auto text-gray-300 mb-6" }), _jsx("h1", { className: "text-3xl font-bold text-gray-900 mb-4", children: "Seu carrinho est\u00E1 vazio" }), _jsx("p", { className: "text-gray-600 mb-8", children: "Adicione alguns planos para come\u00E7ar sua jornada de mentoria" }), _jsxs("button", { onClick: handleContinueShopping, className: "bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-8 rounded-lg transition-colors inline-flex items-center gap-2", children: [_jsx(ShoppingCart, { className: "w-5 h-5" }), "Ver Planos"] })] }) }) }));
    }
    return (_jsx("div", { className: "min-h-screen bg-gray-50 py-8", children: _jsxs("div", { className: "max-w-6xl mx-auto px-4", children: [_jsxs("div", { className: "mb-8", children: [_jsxs("button", { onClick: () => navigate(-1), className: "inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4", children: [_jsx(ArrowLeft, { className: "w-4 h-4" }), "Voltar"] }), _jsxs("h1", { className: "text-3xl font-bold text-gray-900 flex items-center gap-3", children: [_jsx(ShoppingBag, { className: "w-8 h-8" }), "Carrinho de Compras"] }), _jsxs("p", { className: "text-gray-600 mt-2", children: [summary.itemCount, " ", summary.itemCount === 1 ? "item" : "itens", " no seu carrinho"] })] }), _jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-8", children: [_jsx("div", { className: "lg:col-span-2 space-y-4", children: cart?.items.map((item) => (_jsxs("div", { className: "bg-white rounded-lg shadow-sm border p-6", children: [_jsxs("div", { className: "flex items-start justify-between mb-4", children: [_jsxs("div", { className: "flex-1", children: [_jsxs("h3", { className: "text-xl font-semibold text-gray-900 mb-2", children: [item.name, item.isPopular && (_jsx("span", { className: "ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800", children: "Popular" }))] }), _jsx("p", { className: "text-gray-600 mb-3", children: item.description }), _jsxs("div", { className: "flex items-center gap-4 text-sm text-gray-500", children: [_jsxs("span", { children: ["Dura\u00E7\u00E3o: ", item.duration, " meses"] }), _jsx("span", { children: "\u2022" }), _jsxs("span", { children: [item.features.length, " recursos inclusos"] })] })] }), _jsx("button", { onClick: () => removeItem(item.id), className: "p-2 hover:bg-red-50 rounded-full transition-colors text-red-500", disabled: isLoading, children: _jsx(Trash2, { className: "w-5 h-5" }) })] }), _jsxs("div", { className: "mb-4", children: [_jsx("h4", { className: "text-sm font-medium text-gray-700 mb-2", children: "Recursos inclusos:" }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-1", children: [item.features.slice(0, 6).map((feature, index) => (_jsxs("div", { className: "flex items-center gap-2 text-sm text-gray-600", children: [_jsx("div", { className: "w-1.5 h-1.5 bg-green-500 rounded-full" }), feature] }, index))), item.features.length > 6 && (_jsxs("div", { className: "text-sm text-gray-500 col-span-2", children: ["+", item.features.length - 6, " recursos adicionais"] }))] })] }), _jsxs("div", { className: "flex items-center justify-between pt-4 border-t", children: [_jsxs("div", { className: "flex items-center gap-3", children: [_jsx("span", { className: "text-sm text-gray-600", children: "Quantidade:" }), _jsxs("div", { className: "flex items-center gap-2", children: [_jsx("button", { onClick: () => handleQuantityChange(item.id, item.quantity - 1), className: "p-1 hover:bg-gray-100 rounded-full transition-colors", disabled: isLoading, children: _jsx(Minus, { className: "w-4 h-4" }) }), _jsx("span", { className: "w-12 text-center font-medium", children: item.quantity }), _jsx("button", { onClick: () => handleQuantityChange(item.id, item.quantity + 1), className: "p-1 hover:bg-gray-100 rounded-full transition-colors", disabled: isLoading, children: _jsx(Plus, { className: "w-4 h-4" }) })] })] }), _jsxs("div", { className: "text-right", children: [_jsx("div", { className: "text-2xl font-bold text-gray-900", children: formatCurrency(item.price * item.quantity, item.currency) }), item.quantity > 1 && (_jsxs("div", { className: "text-sm text-gray-500", children: [formatCurrency(item.price, item.currency), " cada"] })), item.discount && (_jsxs("div", { className: "text-sm text-green-600", children: ["Desconto: -", item.discount.type === "percentage"
                                                                ? `${item.discount.value}%`
                                                                : formatCurrency(item.discount.value, item.currency)] }))] })] })] }, item.id))) }), _jsx("div", { className: "lg:col-span-1", children: _jsxs("div", { className: "bg-white rounded-lg shadow-sm border p-6 sticky top-6", children: [_jsx("h3", { className: "text-xl font-semibold text-gray-900 mb-6", children: "Resumo do Pedido" }), _jsx("div", { className: "space-y-3 mb-6", children: cart?.items.map((item) => (_jsxs("div", { className: "flex justify-between items-center text-sm", children: [_jsxs("span", { className: "text-gray-600", children: [item.name, " x", item.quantity] }), _jsx("span", { className: "font-medium", children: formatCurrency(item.price * item.quantity, item.currency) })] }, item.id))) }), _jsxs("div", { className: "space-y-3 mb-6 pt-4 border-t", children: [_jsxs("div", { className: "flex justify-between text-sm", children: [_jsx("span", { className: "text-gray-600", children: "Subtotal" }), _jsx("span", { className: "font-medium", children: formatCurrency(summary.subtotal, summary.currency) })] }), summary.discount > 0 && (_jsxs("div", { className: "flex justify-between text-sm text-green-600", children: [_jsx("span", { children: "Desconto" }), _jsxs("span", { children: ["-", formatCurrency(summary.discount, summary.currency)] })] })), summary.tax > 0 && (_jsxs("div", { className: "flex justify-between text-sm", children: [_jsx("span", { className: "text-gray-600", children: "Impostos" }), _jsx("span", { className: "font-medium", children: formatCurrency(summary.tax, summary.currency) })] })), _jsxs("div", { className: "flex justify-between text-lg font-bold pt-3 border-t", children: [_jsx("span", { children: "Total" }), _jsx("span", { children: formatCurrency(summary.total, summary.currency) })] }), summary.savings && summary.savings > 0 && (_jsxs("div", { className: "text-center text-sm text-green-600 bg-green-50 p-2 rounded", children: ["Voc\u00EA economiza", " ", formatCurrency(summary.savings, summary.currency), "!"] }))] }), _jsxs("div", { className: "space-y-3", children: [_jsx("button", { onClick: handleCheckout, disabled: isLoading, className: "w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-semibold py-3 px-4 rounded-lg transition-colors", children: isLoading ? "Processando..." : "Finalizar Compra" }), _jsx("button", { onClick: handleContinueShopping, className: "w-full border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-2 px-4 rounded-lg transition-colors", children: "Continuar Comprando" }), _jsx("button", { onClick: clearCart, disabled: isLoading, className: "w-full text-red-600 hover:text-red-700 text-sm font-medium py-2 transition-colors", children: "Limpar Carrinho" })] }), _jsxs("div", { className: "mt-6 pt-6 border-t", children: [_jsxs("div", { className: "flex items-center gap-2 text-sm text-gray-600 mb-2", children: [_jsx("svg", { className: "w-4 h-4 text-green-500", fill: "currentColor", viewBox: "0 0 20 20", children: _jsx("path", { fillRule: "evenodd", d: "M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z", clipRule: "evenodd" }) }), _jsx("span", { className: "font-medium", children: "Garantia de 30 dias" })] }), _jsx("p", { className: "text-xs text-gray-500", children: "N\u00E3o ficou satisfeito? Devolvemos seu dinheiro em at\u00E9 30 dias." })] })] }) })] })] }) }));
};
export default Cart;
